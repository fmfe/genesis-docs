(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{380:function(e,r,t){"use strict";t.r(r);var n=t(42),_=Object(n.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"带你了解基于-vue-的微服务解决方案-genesis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#带你了解基于-vue-的微服务解决方案-genesis"}},[e._v("#")]),e._v(" 带你了解基于 Vue 的微服务解决方案 Genesis")]),e._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),t("p",[e._v("这几年，因为忙于业务，都很少在社区发言了，直到今年要重构整个 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME5.0"),t("OutboundLink")],1),e._v(" 网站，为了满足业务发展的需要，才设计了 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" ，顺势推出了基于 Vue 的"),t("code",[e._v("微服务")]),e._v("解决方案。")]),e._v(" "),t("p",[e._v("在设计之初，不是没有考虑过社区的一些解决方案，但是无一例外的都是基于客户端聚合的"),t("code",[e._v("微前端")]),e._v("解决方案，和我们真正的需求还差之很远。")]),e._v(" "),t("h2",{attrs:{id:"需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#需求"}},[e._v("#")]),e._v(" 需求")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("国际化"),t("br"),e._v("\n在 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME5.0"),t("OutboundLink")],1),e._v(" 之前，有很多项目都是采用 "),t("code",[e._v("CSR")]),e._v(" 渲染的，导致页面被分享给外国网站或者APP时，页面的标题和描述，呈现出来的是中文的，导致在海外推广时，非常的不利于传播。"),t("br"),e._v("\n所以，在这一点上，我们都否定了基于客户端的微前端聚合方案，起点必须是立足于 "),t("code",[e._v("SSR")]),e._v(" 的渲染，可以针对每一个页面进行标题、描述的国际化。")])]),e._v(" "),t("li",[t("p",[e._v("SEO"),t("br"),e._v("\n在流量为王的时代，通过SEO的优化，仍然是一个获取免费流量重要的渠道。我们内部也尝试过，去做一些SEO相关的项目，采用的技术就是最原始的那种后端模板渲染的方式，也取得了一些成绩，但是也带来了很高的维护成本。当时我们有一个网站通用的头部，基于Vue的维护了一套，基于后端模板渲染的也维护了一套。"),t("br"),e._v("\n所以，我们需要有一个 Vue 的服务，可以提供一个网站的头部组件，由后端模板渲染的服务区调用它，嵌入到页面中。")])]),e._v(" "),t("li",[t("p",[e._v("老项目迁移"),t("br"),e._v("\n很多老的项目，还停留在 "),t("code",[e._v("Webpack2.0")]),e._v("  的版本，跑起来经常出现各种问题，有 "),t("code",[e._v("CSR")]),e._v(" 渲染的，也有 "),t("code",[e._v("SSR")]),e._v(" 渲染的"),t("br"),e._v("\n所以，我们需要新的技术架构上，对老项目最好是无入侵的，支持 "),t("code",[e._v("CSR")]),e._v(" 的渲染，可以解决部分 "),t("code",[e._v("CSR")]),e._v(" 渲染页面的标题和描述的国际化问题。")])]),e._v(" "),t("li",[t("p",[e._v("无刷新跳转"),t("br"),e._v("\n今年网站重构最大的目的之一，就是要解决之前架构的弊端，要做到页面与页面之间的无刷新跳转。这个问题看似很简单，只需要在一个项目中使用 "),t("code",[e._v("vue-router")]),e._v(" 开发即可，但是 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME"),t("OutboundLink")],1),e._v(" 有成百上千个页面，如果只做到一个应用中，在基于 "),t("code",[e._v("SSR")]),e._v(" 的前提下，只要有一个地方出现了故障或者内存泄漏，对于整站来说都是一个不小的打击。或者只要每次发布，整站的那一瞬间都会挂掉"),t("br"),e._v("\n所以，微服务的拆分，可以帮助我们分散风险，一个服务挂了不能影响到另外一个服务。")])]),e._v(" "),t("li",[t("p",[e._v("公共组件的使用"),t("br"),e._v("\n在 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME5.0"),t("OutboundLink")],1),e._v(" 之前，有个公共的网站头部，每个项目都是单独的导入到自己的项目中使用，随之而来的问题就是，每次导航有内容更新的时候，就不得不对十几个前端项目进行依赖的更新，重新构建镜像，然后发布。"),t("br"),e._v("\n所以，我们需要可以对其它服务的组件进行调用，不管是 "),t("code",[e._v("CSR")]),e._v(" 还是 "),t("code",[e._v("SSR")]),e._v("，对组件进行解耦，减少这种因为一个组件的更新，导致一大堆项目发布更新的问题。")])])]),e._v(" "),t("p",[e._v("总结："),t("br"),e._v("\n我们需要一个可以支持 "),t("code",[e._v("SSR")]),e._v(" 和 "),t("code",[e._v("CSR")]),e._v(" 渲染的微服务解决方案。")]),e._v(" "),t("h2",{attrs:{id:"有哪些应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有哪些应用场景"}},[e._v("#")]),e._v(" 有哪些应用场景？")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://fmfe.github.io/genesis-docs/renderer.jpg",alt:"架构设计图"}}),e._v("\n上面这张图，很好的诠释了 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" 微服务的工作原理，以及你使用 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" 可以做些什么。")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("单页应用"),t("br"),e._v("\n通过 CSR 或 SSR 渲染的能力，你可以构建一个单页应用，等到你的项目复杂到一定程度时，可以再考虑拆分服务。")])]),e._v(" "),t("li",[t("p",[e._v("企业网站"),t("br"),e._v("\n和使用后端渲染相比，你可以使用 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" 快速的构建一个 SSR 的企业网站。")])]),e._v(" "),t("li",[t("p",[e._v("后端渲染的项目组件复用"),t("br"),e._v("\n如果你们公司的技术栈是 Vue，为了 SEO 同时还存在着后端渲染的项目，部分页面需要组件复用时，你可以新增一个 SSR 服务，让后端渲染的项目去调用你的服务复用通用的组件。")])]),e._v(" "),t("li",[t("p",[e._v("后台管理系统"),t("br"),e._v("\n随着业务的发展，后台管理系统的将会慢慢的演变成巨石应用，在不改动老项目的情况下，你可以考虑在新的业务中，拆分成微服务，由老项目中去调用新服务的页面。")])]),e._v(" "),t("li",[t("p",[e._v("大型的单页应用"),t("br"),e._v("\n如果你的业务，达到和 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME"),t("OutboundLink")],1),e._v(" 一样的复杂程度，并且需要 SEO、国际化，那么 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" 应该你目前最好的解决方案了。")])])]),e._v(" "),t("h2",{attrs:{id:"如何避免服务冲突"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何避免服务冲突"}},[e._v("#")]),e._v(" 如何避免服务冲突？")]),e._v(" "),t("p",[e._v("样式的冲突，在 Vue 中可以通过 "),t("code",[e._v("scoped")]),e._v(" 来解决，全局的变量之类的，就需要通过开发的规范对开发人员进行约束了。")]),e._v(" "),t("h2",{attrs:{id:"路由管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#路由管理"}},[e._v("#")]),e._v(" 路由管理")]),e._v(" "),t("p",[e._v("和平时普通的使用方式一样，没有什么差别。当你一个页面两个服务都使用了路由时，才需要使用 "),t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Genesis"),t("OutboundLink")],1),e._v(" 包装后的 "),t("code",[e._v("vue-router")]),e._v(" 解决历史模式时，产生多次记录的bug。")]),e._v(" "),t("h2",{attrs:{id:"付费分享"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#付费分享"}},[e._v("#")]),e._v(" 付费分享")]),e._v(" "),t("p",[e._v("如果你们公司，对本套微服务解决方案感兴趣的话，在深圳地区，可以考虑到贵公司付费的分享一些在 "),t("a",{attrs:{href:"https://www.followme.com/?vcode=252339",target:"_blank",rel:"noopener noreferrer"}},[e._v("FOLLOWME"),t("OutboundLink")],1),e._v("实践，GitHub可以联系到我。有钱，我想可以让我更有动力把项目做得更好，毕竟深圳的房子还是太贵了。")]),e._v(" "),t("h2",{attrs:{id:"传送门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传送门"}},[e._v("#")]),e._v(" 传送门")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/fmfe/genesis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://fmfe.github.io/genesis-docs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/lzxb/vue2-demo",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue 基于 Genesis + TS + Vuex 实现的 SSR demo"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/fmfe/vue-genesis-micro",target:"_blank",rel:"noopener noreferrer"}},[e._v("2020年，你可能需要基于Vue的微服务架构实践，在服务端或客户端聚合子服务"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=_.exports}}]);